int numCadeiras = n; // numeros de cadeiras vazias
semaforo ocupadas = 0; // bloqueia caso cadeiras ocupadas
semaforo mutex = 1;
semaforo full = 0;  
int filaDeEspera = 0; // variavel para fazer o controle dos clientes na 
fila,inicialmente não há fila
int esperando = 0; // cliente esperando na fila
int bebendo = 0; // cada unidade representa um cliente sentado
int aux = 0; // variável pra salvar alterações na fila
	
Thread Cliente:

	while(true)
	{
		down(mutex)
		
		if(filaDeEspera == 1)
		{
			esperando++;
			up(mutex);
			down(ocupadas);
		}
		else 
		{
			bebendo++
			if(bebendo == numCadeiras) {
				filaDeEspera = 1;
				vamoBeber();
				up(full);			
			}
			else {
				filaDeEspera = 0;
			}
			up(mutex);
		}
		
		down(full);
		
		bebendo --;
		
		if(bebendo == 0) 
		{
			if(esperando >= numCadeiras) {
				aux = numCadeiras;
			}
			else {
				aux = esperando;
			}
			
			esperando = esperando - aux;
			bebendo = bebendo + aux;
			
			if(bebendo == numCadeiras) { 
				filaDeEspera = 1;
			}
			else {
				filaDeEspera = 0;
			}
			up(ocupadas, aux);
		}
		
		up(full);
		
	}	
	
	
	
	
	
	
	